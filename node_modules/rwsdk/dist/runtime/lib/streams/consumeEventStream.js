import { EventSourceParserStream, } from "eventsource-parser/stream";
export function consumeEventStream({ onChunk, }) {
    const stream = new TransformStream();
    stream.readable
        .pipeThrough(new TextDecoderStream())
        .pipeThrough(new EventSourceParserStream())
        .pipeTo(new WritableStream({
        write(chunk) {
            onChunk(chunk);
        },
    }));
    return stream.writable;
}
